<!DOCTYPE html>
<html>
<head>
    <title>DEEP CLEAN - Photo Upload Test</title>
    <style>
        body { 
            font-family: 'Inter', Arial, sans-serif; 
            padding: 20px; 
            max-width: 900px; 
            margin: 0 auto; 
            background: #f8f9fa;
        }
        .test-container { 
            background: white;
            border-radius: 12px;
            padding: 30px; 
            margin: 20px 0; 
            border: 1px solid #ddd;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }
        .success { color: #28a745; font-weight: bold; }
        .info { color: #1E7CA8; }
        .warning { color: #ffc107; }
        .feature-list { 
            background: #e3f2fd; 
            padding: 20px; 
            border-radius: 8px; 
            border-left: 4px solid #1E7CA8; 
        }
        .demo-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: #343a40;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
        }
        .photo-upload-demo {
            border: 2px dashed #1E7CA8;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        .photo-upload-demo:hover {
            background: #e3f2fd;
            border-color: #0d47a1;
        }
        .photo-upload-demo::before {
            content: "ðŸ“·";
            display: block;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .photo-previews-demo {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .photo-preview-demo {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #ddd;
            background: #f8f9fa;
        }
        .photo-preview-demo img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        .remove-photo-demo {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .upload-progress-demo {
            margin-top: 15px;
        }
        .upload-item-demo {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #ddd;
        }
        .upload-item-demo.success {
            background: #d4edda;
            color: #155724;
            border-left-color: #28a745;
        }
        .upload-item-demo.uploading {
            background: #e3f2fd;
            color: #1565c0;
            border-left-color: #1E7CA8;
        }
        .upload-item-demo .status {
            margin-left: auto;
            font-weight: bold;
        }
        button {
            background: #1E7CA8;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 10px 5px;
        }
        button:hover { background: #165d82; }
        .email-preview {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            white-space: pre-line;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
        .feature-highlight {
            background: #d4edda;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ“· DEEP CLEAN - Photo Upload Feature Test</h1>
        
        <div class="feature-highlight">
            <h3>âœ… Photo Upload Feature Successfully Implemented!</h3>
            <p>Customers can now attach photos when requesting quotes, helping DEEP CLEAN provide faster and more accurate pricing.</p>
        </div>

        <div class="feature-list">
            <h3>ðŸš€ New Features Added:</h3>
            <ul>
                <li><strong>Photo Upload:</strong> Customers can upload up to 5 photos (5MB each)</li>
                <li><strong>Live Preview:</strong> See photo thumbnails before uploading</li>
                <li><strong>Upload Progress:</strong> Real-time upload status with success/error feedback</li>
                <li><strong>Image Hosting:</strong> Photos are uploaded to cloud hosting service</li>
                <li><strong>Email Integration:</strong> Photo URLs are included directly in quote request emails</li>
                <li><strong>Mobile Optimized:</strong> Works perfectly on phones and tablets</li>
                <li><strong>File Validation:</strong> Automatic checking for file size and type</li>
            </ul>
        </div>
    </div>

    <div class="test-container">
        <h2>ðŸ“§ Test Photo Upload + Email Integration</h2>
        <p class="info">This demo shows how the photo upload feature works with email generation.</p>
        
        <form class="demo-form" id="demoForm">
            <div class="form-group">
                <label for="demoName">Your Name:</label>
                <input type="text" id="demoName" value="Photo Upload Tester" required>
            </div>
            
            <div class="form-group">
                <label for="demoEmail">Email Address:</label>
                <input type="email" id="demoEmail" value="asgardbishop@gmail.com" required>
            </div>
            
            <div class="form-group">
                <label for="demoService">Service Type:</label>
                <select id="demoService" required>
                    <option value="Deep Cleaning">Deep Cleaning</option>
                    <option value="Regular Cleaning">Regular Cleaning</option>
                    <option value="Post-Construction">Post-Construction Cleanup</option>
                </select>
            </div>

            <div class="form-group">
                <label for="demoPhotos">ðŸ“· Upload Photos of Areas to Clean:</label>
                <input type="file" id="demoPhotos" multiple accept="image/*" class="photo-upload-demo">
                <small style="color: #666; margin-top: 10px; display: block;">
                    Select photos showing the areas that need cleaning. This helps provide accurate quotes!
                </small>
                <div id="demo-photo-previews" class="photo-previews-demo"></div>
                <div id="demo-upload-progress" class="upload-progress-demo"></div>
            </div>

            <div class="form-group">
                <label for="demoMessage">Additional Details:</label>
                <textarea id="demoMessage" rows="3" placeholder="Describe specific cleaning needs or problem areas shown in photos...">Kitchen needs deep clean - see grease buildup in photos. Bathroom tiles need professional attention. Living room carpet has stains visible in images.</textarea>
            </div>

            <button type="button" onclick="generateTestEmail()">ðŸ§ª Generate Test Email with Photos</button>
            <button type="button" onclick="sendToDeepClean()">ðŸ“§ Send to DEEP CLEAN</button>
        </form>
    </div>

    <div class="test-container">
        <h3>ðŸ“§ Generated Email Preview</h3>
        <div id="emailPreview" class="email-preview">
            Click "Generate Test Email" above to see the email with photo links...
        </div>
    </div>

    <div class="test-container">
        <h3>ðŸ”§ Technical Details</h3>
        <p><strong>Image Hosting:</strong> Photos are uploaded to ImgBB (free tier) and URLs are generated</p>
        <p><strong>Email Method:</strong> Uses mailto links to open default email client with pre-filled content</p>
        <p><strong>Photo Integration:</strong> Image URLs are embedded in email body for easy viewing</p>
        <p><strong>Fallback:</strong> If images don't upload, form still works without photos</p>
        
        <div class="feature-highlight">
            <h4>ðŸ’¡ For Production Use:</h4>
            <p>Get a free API key from <strong>imgbb.com</strong> and replace the placeholder in script.js for real photo uploads. Currently using demo placeholders.</p>
        </div>
    </div>

    <script>
        let demoUploadedImages = [];

        document.getElementById('demoPhotos').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const previewContainer = document.getElementById('demo-photo-previews');
            const progressContainer = document.getElementById('demo-upload-progress');
            
            if (files.length > 5) {
                alert('Please select maximum 5 photos.');
                return;
            }
            
            previewContainer.innerHTML = '';
            progressContainer.innerHTML = '';
            demoUploadedImages = [];
            
            files.forEach((file, index) => {
                if (file.size > 5 * 1024 * 1024) {
                    showDemoUploadStatus(file.name, 'File too large (max 5MB)', 'error');
                    return;
                }
                
                createDemoPhotoPreview(file, index);
                uploadDemoImageToHost(file, index);
            });
        });

        function createDemoPhotoPreview(file, index) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.createElement('div');
                preview.className = 'photo-preview-demo';
                preview.innerHTML = `
                    <img src="${e.target.result}" alt="Preview ${index + 1}">
                    <button type="button" class="remove-photo-demo" onclick="removeDemoPhoto(${index})">&times;</button>
                `;
                document.getElementById('demo-photo-previews').appendChild(preview);
            };
            reader.readAsDataURL(file);
        }

        function uploadDemoImageToHost(file, index) {
            showDemoUploadStatus(file.name, 'Uploading...', 'uploading');
            
            setTimeout(() => {
                const imageUrl = `https://via.placeholder.com/600x400/1E7CA8/ffffff?text=DEMO+Photo+${index + 1}+Uploaded`;
                demoUploadedImages[index] = {
                    url: imageUrl,
                    filename: file.name
                };
                showDemoUploadStatus(file.name, 'Uploaded âœ“', 'success');
            }, 1000 + Math.random() * 1500);
        }

        function showDemoUploadStatus(filename, status, type) {
            const progressContainer = document.getElementById('demo-upload-progress');
            const existing = progressContainer.querySelector(`[data-file="${filename}"]`);
            
            if (existing) {
                existing.className = `upload-item-demo ${type}`;
                existing.querySelector('.status').textContent = status;
            } else {
                const item = document.createElement('div');
                item.className = `upload-item-demo ${type}`;
                item.setAttribute('data-file', filename);
                item.innerHTML = `
                    <span>ðŸ“· ${filename}</span>
                    <span class="status">${status}</span>
                `;
                progressContainer.appendChild(item);
            }
        }

        function removeDemoPhoto(index) {
            demoUploadedImages.splice(index, 1);
            const previews = document.querySelectorAll('.photo-preview-demo');
            const progressItems = document.querySelectorAll('.upload-item-demo');
            
            if (previews[index]) previews[index].remove();
            if (progressItems[index]) progressItems[index].remove();
        }

        function generateTestEmail() {
            const name = document.getElementById('demoName').value;
            const email = document.getElementById('demoEmail').value;
            const service = document.getElementById('demoService').value;
            const message = document.getElementById('demoMessage').value;
            
            const subject = `${service} Quote Request - WITH PHOTOS âœ…`;
            
            let emailBody = `Hello DEEP CLEAN,

I would like to request a quote for ${service} service.

CONTACT DETAILS:
Name: ${name}
Email: ${email}
Phone: 0433-147-018 (demo)

SERVICE REQUESTED: ${service}
Property Type: Residential
Property Size: 3-4 Bedrooms

PROPERTY ADDRESS:
Brisbane Bayside, QLD 4165

ADDITIONAL DETAILS:
${message}`;

            if (demoUploadedImages && demoUploadedImages.length > 0) {
                emailBody += `

ðŸ“· PHOTOS OF AREAS TO CLEAN:`;
                demoUploadedImages.forEach((image, index) => {
                    if (image && image.url) {
                        emailBody += `
Photo ${index + 1} (${image.filename}): ${image.url}`;
                    }
                });
                emailBody += `

âœ¨ Please view the photos above to see the areas that need cleaning. This will help you provide a more accurate quote based on the actual conditions shown.`;
            } else {
                emailBody += `

ðŸ“· PHOTOS: No photos uploaded for this demo.`;
            }

            emailBody += `

This is a demonstration of the new photo upload feature for DEEP CLEAN's website! 

ðŸš€ NEW FEATURES DEMONSTRATED:
â€¢ Photo upload with live preview
â€¢ Automatic image hosting and URL generation  
â€¢ Photos embedded directly in quote request emails
â€¢ Mobile-friendly drag & drop interface
â€¢ File validation and progress tracking

Please contact me at your earliest convenience to discuss pricing and availability.

Thank you,
${name}

---
âœ… Photo Upload Feature Test Completed Successfully!`;

            document.getElementById('emailPreview').textContent = `To: asgardbishop@gmail.com
CC: deepclean.go2@gmail.com  
Subject: ${subject}

${emailBody}`;
            
            return { subject, emailBody };
        }

        function sendToDeepClean() {
            const emailData = generateTestEmail();
            const mailtoLink = `mailto:asgardbishop@gmail.com?cc=deepclean.go2@gmail.com&subject=${encodeURIComponent(emailData.subject)}&body=${encodeURIComponent(emailData.emailBody)}`;
            
            window.location.href = mailtoLink;
            alert('âœ… Email client opened! The photo upload feature test email is ready to send to asgardbishop@gmail.com');
        }

        // Auto-generate preview on page load
        window.onload = function() {
            setTimeout(generateTestEmail, 500);
        };
    </script>
</body>
</html>